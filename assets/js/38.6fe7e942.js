(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{237:function(t,e,s){"use strict";s.r(e);var n=s(0),i=Object(n.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"github博客自动化部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github博客自动化部署"}},[t._v("#")]),t._v(" github博客自动化部署")]),t._v(" "),s("p",[t._v("原材料：github博客，travis-ci.org")]),t._v(" "),s("ol",[s("li",[t._v("首先你有一个类似xxx.github.io的博客")]),t._v(" "),s("li",[t._v("打开 https://github.com/settings/tokens")]),t._v(" "),s("li",[t._v("点击Personal access tokens旁的generate new token")]),t._v(" "),s("li",[t._v("复制好这个token，之后会需要")]),t._v(" "),s("li",[t._v("打开 https://travis-ci.org/")]),t._v(" "),s("li",[t._v("用github登陆")]),t._v(" "),s("li",[t._v("点击头像，打开settings，打开你所需要部署的仓库的开关（页面上很明显能找到）")]),t._v(" "),s("li",[t._v("在项目根目录新建.travis.yml，并输入下面")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('language: node_js\nnode_js:\n- lts/*\ncache:\n  directories:\n  - node_modules\ninstall:\n- npm ci\nscript:\n- npm run docs:build #scripts里输入你自己的脚步，我这里是基于vuepress的\n- cd docs/.vuepress/dist\n- echo \'你自己的网址域名\' > CNAME #如果你需要指向自己的域名\nafter_script:\n- git config credential.helper "store --file=.git/credentials"\n- echo "https://${GH_TOKEN}:@github.com" > .git/credentials\n- node ./node_modules/grunt-cli/bin/grunt release\n- git config --global user.email "邮箱"\n- git config --global user.name "用户名"\n- git init\n- git add .\n- git commit -m \'deploy\'\n- git push -f "https://${GH_TOKEN}@github.com/test/test.github.io.git" master #更换test内容，这里参照你自己的GitHub地址去改\nbranches:\n  only:\n  - dev\ndeploy:\n  provider: pages\n  skip-cleanup: true\n  local_dir: docs/.vuepress/dist\n  github_token: "$GH_TOKEN"\n  keep-history: true\n  on:\n    branch: dev\n\n')])])]),s("ol",{attrs:{start:"9"}},[s("li",[t._v("在电脑shell里输入")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('gem install travis\n\ntravis encrypt GH_TOKEN="第四步保存的key" --add\n')])])]),s("ol",{attrs:{start:"10"}},[s("li",[t._v("这个时候你会发现你的.travis.yml会多出")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('env:\n  global:\n    - secure: "lots-of-seemingly-random-characters"\n')])])]),s("p",[t._v("这句话，这其实就是加密后的token，用于push代码")]),t._v(" "),s("ol",{attrs:{start:"11"}},[s("li",[t._v("然后就像平常一样push代码，就会自动部署啦")])])])}),[],!1,null,null,null);e.default=i.exports}}]);